{"name":"cottontail","tagline":"handle AMQP with style","body":"# Cottontail\r\n\r\nThis library is a wrapper around the popular AMQP bunny gem. It is inspired by Sinatra to easily consume messages on different routing keys.\r\n\r\n[![Gem Version](https://badge.fury.io/rb/cottontail.svg)](https://badge.fury.io/rb/cottontail)\r\n[![Build Status](https://travis-ci.org/rudionrails/cottontail.svg?branch=master)](https://travis-ci.org/rudionrails/cottontail)\r\n[![Code Climate](https://codeclimate.com/github/rudionrails/cottontail/badges/gpa.svg)](https://codeclimate.com/github/rudionrails/cottontail)\r\n[![Coverage Status](https://coveralls.io/repos/rudionrails/cottontail/badge.svg?branch=master&service=github)](https://coveralls.io/github/rudionrails/cottontail?branch=master)\r\n\r\n## Installation\r\n\r\nSystem wide:\r\n\r\n```console\r\ngem install cottontail\r\n```\r\n\r\nOr in your Gemfile:\r\n\r\n```ruby\r\ngem 'cottontail'\r\n```\r\n\r\n## Usage\r\n\r\nWhen using this gem, you should already be familiar with RabbitMQ and, idealy, Bunny as it's a wrapper around it. Given we place our code into `worker.rb`, we can define a simple class like so:.\r\n\r\n```ruby\r\nrequire 'cottontail'\r\n\r\nclass Worker\r\n  include Cottontail::Consumer\r\n\r\n  session ENV['RABBITMQ_URL'] do |worker, session|\r\n    channel = session.create_channel\r\n\r\n    queue = channel.queue('', durable: true)\r\n    worker.subscribe(queue, exclusive: true, ack: false)\r\n  end\r\n\r\n  consume do |delivery_info, properties, payload|\r\n    logger.info payload.inspect\r\n  end\r\nend\r\n\r\n# The following will start Cottontail right away. You need to be aware that it\r\n# will enter the Bunny subscribe loop, so it will block the process.\r\nWorker.start\r\n```\r\n\r\nTo run it, you may start it like the following code example. However, you should use a more sophisticated solution for daemonizing your processes in a production environment. See http://www.ruby-toolbox.com/categories/daemonizing for futher inspiration.\r\n\r\n```console\r\nruby worker.rb &\r\n```\r\n\r\nCopyright &copy; 2012-2015 Rudolf Schmidt, released under the MIT license\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}